{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "description": "Resource Type definition for AWS::CodeDeploy::DeploymentGroup",
  "additionalProperties": false,
  "properties": {
    "OnPremisesTagSet": {
      "$ref": "#/definitions/OnPremisesTagSet"
    },
    "ApplicationName": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "DeploymentStyle": {
      "$ref": "#/definitions/DeploymentStyle"
    },
    "ServiceRoleArn": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "BlueGreenDeploymentConfiguration": {
      "$ref": "#/definitions/BlueGreenDeploymentConfiguration"
    },
    "AutoScalingGroups": {
      "type": "array",
      "uniqueItems": true,
      "items": {
        "type": "string"
      }
    },
    "Ec2TagSet": {
      "$ref": "#/definitions/EC2TagSet"
    },
    "OutdatedInstancesStrategy": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "TriggerConfigurations": {
      "type": "array",
      "uniqueItems": true,
      "items": {
        "$ref": "#/definitions/TriggerConfig"
      }
    },
    "Deployment": {
      "$ref": "#/definitions/Deployment"
    },
    "DeploymentConfigName": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "AlarmConfiguration": {
      "$ref": "#/definitions/AlarmConfiguration"
    },
    "Ec2TagFilters": {
      "type": "array",
      "uniqueItems": true,
      "items": {
        "$ref": "#/definitions/EC2TagFilter"
      }
    },
    "TerminationHookEnabled": {
      "type": "boolean"
    },
    "ECSServices": {
      "type": "array",
      "uniqueItems": true,
      "items": {
        "$ref": "#/definitions/ECSService"
      }
    },
    "AutoRollbackConfiguration": {
      "$ref": "#/definitions/AutoRollbackConfiguration"
    },
    "LoadBalancerInfo": {
      "$ref": "#/definitions/LoadBalancerInfo"
    },
    "Id": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "DeploymentGroupName": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "Tags": {
      "type": "array",
      "uniqueItems": false,
      "items": {
        "$ref": "#/definitions/Tag"
      }
    },
    "OnPremisesInstanceTagFilters": {
      "type": "array",
      "uniqueItems": true,
      "items": {
        "$ref": "#/definitions/TagFilter"
      }
    }
  },
  "definitions": {
    "OnPremisesTagSet": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "OnPremisesTagSetList": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/OnPremisesTagSetListObject"
          }
        }
      }
    },
    "DeploymentStyle": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "DeploymentOption": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "DeploymentType": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "BlueGreenDeploymentConfiguration": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "GreenFleetProvisioningOption": {
          "$ref": "#/definitions/GreenFleetProvisioningOption"
        },
        "DeploymentReadyOption": {
          "$ref": "#/definitions/DeploymentReadyOption"
        },
        "TerminateBlueInstancesOnDeploymentSuccess": {
          "$ref": "#/definitions/BlueInstanceTerminationOption"
        }
      }
    },
    "TagFilter": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Value": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Type": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Key": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "TriggerConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "TriggerTargetArn": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "TriggerName": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "TriggerEvents": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string"
          }
        }
      }
    },
    "GitHubLocation": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Repository": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "CommitId": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "Repository",
        "CommitId"
      ]
    },
    "Deployment": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Description": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Revision": {
          "$ref": "#/definitions/RevisionLocation"
        },
        "IgnoreApplicationStopFailures": {
          "type": "boolean"
        }
      },
      "required": [
        "Revision"
      ]
    },
    "ELBInfo": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Name": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "EC2TagSetListObject": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Ec2TagGroup": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/EC2TagFilter"
          }
        }
      }
    },
    "S3Location": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "BundleType": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Bucket": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ETag": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Version": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Key": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "Bucket",
        "Key"
      ]
    },
    "AutoRollbackConfiguration": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Events": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string"
          }
        },
        "Enabled": {
          "type": "boolean"
        }
      }
    },
    "DeploymentReadyOption": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "WaitTimeInMinutes": {
          "type": "integer"
        },
        "ActionOnTimeout": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "EC2TagFilter": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Value": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Type": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Key": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "RevisionLocation": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "S3Location": {
          "$ref": "#/definitions/S3Location"
        },
        "GitHubLocation": {
          "$ref": "#/definitions/GitHubLocation"
        },
        "RevisionType": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "GreenFleetProvisioningOption": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Action": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "LoadBalancerInfo": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "TargetGroupInfoList": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/TargetGroupInfo"
          }
        },
        "ElbInfoList": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/ELBInfo"
          }
        },
        "TargetGroupPairInfoList": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/TargetGroupPairInfo"
          }
        }
      }
    },
    "AlarmConfiguration": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Alarms": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/Alarm"
          }
        },
        "IgnorePollAlarmFailure": {
          "type": "boolean"
        },
        "Enabled": {
          "type": "boolean"
        }
      }
    },
    "EC2TagSet": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Ec2TagSetList": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/EC2TagSetListObject"
          }
        }
      }
    },
    "TrafficRoute": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ListenerArns": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string"
          }
        }
      }
    },
    "ECSService": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ServiceName": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ClusterName": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "ServiceName",
        "ClusterName"
      ]
    },
    "TargetGroupPairInfo": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ProdTrafficRoute": {
          "$ref": "#/definitions/TrafficRoute"
        },
        "TestTrafficRoute": {
          "$ref": "#/definitions/TrafficRoute"
        },
        "TargetGroups": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/TargetGroupInfo"
          }
        }
      }
    },
    "Alarm": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Name": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "TargetGroupInfo": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Name": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "OnPremisesTagSetListObject": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "OnPremisesTagGroup": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "$ref": "#/definitions/TagFilter"
          }
        }
      }
    },
    "Tag": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Value": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Key": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "Value",
        "Key"
      ]
    },
    "BlueInstanceTerminationOption": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "TerminationWaitTimeInMinutes": {
          "type": "integer"
        },
        "Action": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    }
  },
  "required": [
    "ApplicationName",
    "ServiceRoleArn"
  ]
}