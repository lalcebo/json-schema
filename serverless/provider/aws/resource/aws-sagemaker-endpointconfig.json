{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "description": "Resource Type definition for AWS::SageMaker::EndpointConfig",
  "additionalProperties": false,
  "properties": {
    "ShadowProductionVariants": {
      "type": "array",
      "uniqueItems": false,
      "items": {
        "$ref": "#/definitions/ProductionVariant"
      }
    },
    "DataCaptureConfig": {
      "$ref": "#/definitions/DataCaptureConfig"
    },
    "ExecutionRoleArn": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "EnableNetworkIsolation": {
      "type": "boolean"
    },
    "ProductionVariants": {
      "type": "array",
      "uniqueItems": false,
      "items": {
        "$ref": "#/definitions/ProductionVariant"
      }
    },
    "KmsKeyId": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "AsyncInferenceConfig": {
      "$ref": "#/definitions/AsyncInferenceConfig"
    },
    "VpcConfig": {
      "$ref": "#/definitions/VpcConfig"
    },
    "EndpointConfigName": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "ExplainerConfig": {
      "$ref": "#/definitions/ExplainerConfig"
    },
    "Id": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "Tags": {
      "type": "array",
      "uniqueItems": false,
      "items": {
        "$ref": "#/definitions/Tag"
      }
    }
  },
  "definitions": {
    "ManagedInstanceScaling": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Status": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "MaxInstanceCount": {
          "type": "integer"
        },
        "MinInstanceCount": {
          "type": "integer"
        }
      }
    },
    "AsyncInferenceNotificationConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "IncludeInferenceResponseIn": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "type": "string"
          }
        },
        "SuccessTopic": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ErrorTopic": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "ClarifyHeader": {
      "type": "object",
      "additionalProperties": false
    },
    "ProductionVariant": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ManagedInstanceScaling": {
          "$ref": "#/definitions/ManagedInstanceScaling"
        },
        "ModelName": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "VolumeSizeInGB": {
          "type": "integer"
        },
        "EnableSSMAccess": {
          "type": "boolean"
        },
        "VariantName": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "InitialInstanceCount": {
          "type": "integer"
        },
        "RoutingConfig": {
          "$ref": "#/definitions/RoutingConfig"
        },
        "AcceleratorType": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "InitialVariantWeight": {
          "type": "number"
        },
        "ModelDataDownloadTimeoutInSeconds": {
          "type": "integer"
        },
        "ContainerStartupHealthCheckTimeoutInSeconds": {
          "type": "integer"
        },
        "ServerlessConfig": {
          "$ref": "#/definitions/ServerlessConfig"
        },
        "InstanceType": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "VariantName"
      ]
    },
    "VpcConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "SecurityGroupIds": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "type": "string"
          }
        },
        "Subnets": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "Subnets",
        "SecurityGroupIds"
      ]
    },
    "ClarifyInferenceConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ContentTemplate": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "LabelHeaders": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "$ref": "#/definitions/ClarifyHeader"
          }
        },
        "MaxPayloadInMB": {
          "type": "integer"
        },
        "ProbabilityIndex": {
          "type": "integer"
        },
        "LabelAttribute": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "FeatureTypes": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "$ref": "#/definitions/ClarifyFeatureType"
          }
        },
        "FeatureHeaders": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "$ref": "#/definitions/ClarifyHeader"
          }
        },
        "LabelIndex": {
          "type": "integer"
        },
        "ProbabilityAttribute": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "FeaturesAttribute": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "MaxRecordCount": {
          "type": "integer"
        }
      }
    },
    "ExplainerConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ClarifyExplainerConfig": {
          "$ref": "#/definitions/ClarifyExplainerConfig"
        }
      }
    },
    "ClarifyFeatureType": {
      "type": "object",
      "additionalProperties": false
    },
    "CaptureContentTypeHeader": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "CsvContentTypes": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "type": "string"
          }
        },
        "JsonContentTypes": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "type": "string"
          }
        }
      }
    },
    "RoutingConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "RoutingStrategy": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "ClarifyTextConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Language": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Granularity": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "Language",
        "Granularity"
      ]
    },
    "DataCaptureConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "CaptureOptions": {
          "type": "array",
          "uniqueItems": false,
          "items": {
            "$ref": "#/definitions/CaptureOption"
          }
        },
        "KmsKeyId": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "DestinationS3Uri": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "InitialSamplingPercentage": {
          "type": "integer"
        },
        "CaptureContentTypeHeader": {
          "$ref": "#/definitions/CaptureContentTypeHeader"
        },
        "EnableCapture": {
          "type": "boolean"
        }
      },
      "required": [
        "CaptureOptions",
        "DestinationS3Uri",
        "InitialSamplingPercentage"
      ]
    },
    "AsyncInferenceConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ClientConfig": {
          "$ref": "#/definitions/AsyncInferenceClientConfig"
        },
        "OutputConfig": {
          "$ref": "#/definitions/AsyncInferenceOutputConfig"
        }
      },
      "required": [
        "OutputConfig"
      ]
    },
    "AsyncInferenceClientConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "MaxConcurrentInvocationsPerInstance": {
          "type": "integer"
        }
      }
    },
    "ClarifyShapBaselineConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "MimeType": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ShapBaseline": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ShapBaselineUri": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    },
    "ServerlessConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "MaxConcurrency": {
          "type": "integer"
        },
        "MemorySizeInMB": {
          "type": "integer"
        },
        "ProvisionedConcurrency": {
          "type": "integer"
        }
      },
      "required": [
        "MaxConcurrency",
        "MemorySizeInMB"
      ]
    },
    "ClarifyShapConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "TextConfig": {
          "$ref": "#/definitions/ClarifyTextConfig"
        },
        "UseLogit": {
          "type": "boolean"
        },
        "Seed": {
          "type": "integer"
        },
        "ShapBaselineConfig": {
          "$ref": "#/definitions/ClarifyShapBaselineConfig"
        },
        "NumberOfSamples": {
          "type": "integer"
        }
      },
      "required": [
        "ShapBaselineConfig"
      ]
    },
    "ClarifyExplainerConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "EnableExplanations": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ShapConfig": {
          "$ref": "#/definitions/ClarifyShapConfig"
        },
        "InferenceConfig": {
          "$ref": "#/definitions/ClarifyInferenceConfig"
        }
      },
      "required": [
        "ShapConfig"
      ]
    },
    "CaptureOption": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "CaptureMode": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "CaptureMode"
      ]
    },
    "Tag": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Value": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Key": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "Value",
        "Key"
      ]
    },
    "AsyncInferenceOutputConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "NotificationConfig": {
          "$ref": "#/definitions/AsyncInferenceNotificationConfig"
        },
        "KmsKeyId": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "S3OutputPath": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "S3FailurePath": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      }
    }
  },
  "required": [
    "ProductionVariants"
  ]
}