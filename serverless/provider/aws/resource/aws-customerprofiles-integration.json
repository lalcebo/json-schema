{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "description": "The resource schema for creating an Amazon Connect Customer Profiles Integration.",
  "definitions": {
    "Tag": {
      "type": "object",
      "properties": {
        "Key": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^(?!aws:)[a-zA-Z+-=._:/]+$",
              "minLength": 1,
              "maxLength": 128
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Value": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 0,
              "maxLength": 256
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "Key",
        "Value"
      ]
    },
    "Object": {
      "oneOf": [
        {
          "type": "string",
          "maxLength": 512,
          "pattern": "\\S+",
          "additionalProperties": false
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "MarketoSourceProperties": {
      "type": "object",
      "properties": {
        "Object": {
          "$ref": "#/definitions/Object"
        }
      },
      "required": [
        "Object"
      ],
      "additionalProperties": false
    },
    "S3SourceProperties": {
      "type": "object",
      "properties": {
        "BucketName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 3,
              "maxLength": 63,
              "pattern": "\\S+"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "BucketPrefix": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 512,
              "pattern": ".*"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "BucketName"
      ],
      "additionalProperties": false
    },
    "SalesforceSourceProperties": {
      "type": "object",
      "properties": {
        "Object": {
          "$ref": "#/definitions/Object"
        },
        "EnableDynamicFieldUpdate": {
          "type": "boolean"
        },
        "IncludeDeletedRecords": {
          "type": "boolean"
        }
      },
      "required": [
        "Object"
      ],
      "additionalProperties": false
    },
    "ServiceNowSourceProperties": {
      "type": "object",
      "properties": {
        "Object": {
          "$ref": "#/definitions/Object"
        }
      },
      "required": [
        "Object"
      ],
      "additionalProperties": false
    },
    "ZendeskSourceProperties": {
      "type": "object",
      "properties": {
        "Object": {
          "$ref": "#/definitions/Object"
        }
      },
      "required": [
        "Object"
      ],
      "additionalProperties": false
    },
    "SourceConnectorProperties": {
      "type": "object",
      "properties": {
        "Marketo": {
          "$ref": "#/definitions/MarketoSourceProperties"
        },
        "S3": {
          "$ref": "#/definitions/S3SourceProperties"
        },
        "Salesforce": {
          "$ref": "#/definitions/SalesforceSourceProperties"
        },
        "ServiceNow": {
          "$ref": "#/definitions/ServiceNowSourceProperties"
        },
        "Zendesk": {
          "$ref": "#/definitions/ZendeskSourceProperties"
        }
      },
      "additionalProperties": false
    },
    "ConnectorType": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Salesforce",
            "Marketo",
            "ServiceNow",
            "Zendesk",
            "S3"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "IncrementalPullConfig": {
      "type": "object",
      "properties": {
        "DatetimeTypeFieldName": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 256
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "SourceFlowConfig": {
      "type": "object",
      "properties": {
        "ConnectorType": {
          "$ref": "#/definitions/ConnectorType"
        },
        "ConnectorProfileName": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 256,
              "pattern": "[\\w/!@#+=.-]+"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "IncrementalPullConfig": {
          "$ref": "#/definitions/IncrementalPullConfig"
        },
        "SourceConnectorProperties": {
          "$ref": "#/definitions/SourceConnectorProperties"
        }
      },
      "required": [
        "ConnectorType",
        "SourceConnectorProperties"
      ],
      "additionalProperties": false
    },
    "ConnectorOperator": {
      "type": "object",
      "properties": {
        "Marketo": {
          "$ref": "#/definitions/MarketoConnectorOperator"
        },
        "S3": {
          "$ref": "#/definitions/S3ConnectorOperator"
        },
        "Salesforce": {
          "$ref": "#/definitions/SalesforceConnectorOperator"
        },
        "ServiceNow": {
          "$ref": "#/definitions/ServiceNowConnectorOperator"
        },
        "Zendesk": {
          "$ref": "#/definitions/ZendeskConnectorOperator"
        }
      },
      "additionalProperties": false
    },
    "Operator": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "PROJECTION",
            "LESS_THAN",
            "GREATER_THAN",
            "CONTAINS",
            "BETWEEN",
            "LESS_THAN_OR_EQUAL_TO",
            "GREATER_THAN_OR_EQUAL_TO",
            "EQUAL_TO",
            "NOT_EQUAL_TO",
            "ADDITION",
            "MULTIPLICATION",
            "DIVISION",
            "SUBTRACTION",
            "MASK_ALL",
            "MASK_FIRST_N",
            "MASK_LAST_N",
            "VALIDATE_NON_NULL",
            "VALIDATE_NON_ZERO",
            "VALIDATE_NON_NEGATIVE",
            "VALIDATE_NUMERIC",
            "NO_OP"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "MarketoConnectorOperator": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "PROJECTION",
            "LESS_THAN",
            "GREATER_THAN",
            "BETWEEN",
            "ADDITION",
            "MULTIPLICATION",
            "DIVISION",
            "SUBTRACTION",
            "MASK_ALL",
            "MASK_FIRST_N",
            "MASK_LAST_N",
            "VALIDATE_NON_NULL",
            "VALIDATE_NON_ZERO",
            "VALIDATE_NON_NEGATIVE",
            "VALIDATE_NUMERIC",
            "NO_OP"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "S3ConnectorOperator": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "PROJECTION",
            "LESS_THAN",
            "GREATER_THAN",
            "BETWEEN",
            "LESS_THAN_OR_EQUAL_TO",
            "GREATER_THAN_OR_EQUAL_TO",
            "EQUAL_TO",
            "NOT_EQUAL_TO",
            "ADDITION",
            "MULTIPLICATION",
            "DIVISION",
            "SUBTRACTION",
            "MASK_ALL",
            "MASK_FIRST_N",
            "MASK_LAST_N",
            "VALIDATE_NON_NULL",
            "VALIDATE_NON_ZERO",
            "VALIDATE_NON_NEGATIVE",
            "VALIDATE_NUMERIC",
            "NO_OP"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "SalesforceConnectorOperator": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "PROJECTION",
            "LESS_THAN",
            "GREATER_THAN",
            "CONTAINS",
            "BETWEEN",
            "LESS_THAN_OR_EQUAL_TO",
            "GREATER_THAN_OR_EQUAL_TO",
            "EQUAL_TO",
            "NOT_EQUAL_TO",
            "ADDITION",
            "MULTIPLICATION",
            "DIVISION",
            "SUBTRACTION",
            "MASK_ALL",
            "MASK_FIRST_N",
            "MASK_LAST_N",
            "VALIDATE_NON_NULL",
            "VALIDATE_NON_ZERO",
            "VALIDATE_NON_NEGATIVE",
            "VALIDATE_NUMERIC",
            "NO_OP"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "ServiceNowConnectorOperator": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "PROJECTION",
            "LESS_THAN",
            "GREATER_THAN",
            "CONTAINS",
            "BETWEEN",
            "LESS_THAN_OR_EQUAL_TO",
            "GREATER_THAN_OR_EQUAL_TO",
            "EQUAL_TO",
            "NOT_EQUAL_TO",
            "ADDITION",
            "MULTIPLICATION",
            "DIVISION",
            "SUBTRACTION",
            "MASK_ALL",
            "MASK_FIRST_N",
            "MASK_LAST_N",
            "VALIDATE_NON_NULL",
            "VALIDATE_NON_ZERO",
            "VALIDATE_NON_NEGATIVE",
            "VALIDATE_NUMERIC",
            "NO_OP"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "ZendeskConnectorOperator": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "PROJECTION",
            "GREATER_THAN",
            "ADDITION",
            "MULTIPLICATION",
            "DIVISION",
            "SUBTRACTION",
            "MASK_ALL",
            "MASK_FIRST_N",
            "MASK_LAST_N",
            "VALIDATE_NON_NULL",
            "VALIDATE_NON_ZERO",
            "VALIDATE_NON_NEGATIVE",
            "VALIDATE_NUMERIC",
            "NO_OP"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "OperatorPropertiesKeys": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "VALUE",
            "VALUES",
            "DATA_TYPE",
            "UPPER_BOUND",
            "LOWER_BOUND",
            "SOURCE_DATA_TYPE",
            "DESTINATION_DATA_TYPE",
            "VALIDATION_ACTION",
            "MASK_VALUE",
            "MASK_LENGTH",
            "TRUNCATE_LENGTH",
            "MATH_OPERATION_FIELDS_ORDER",
            "CONCAT_FORMAT",
            "SUBFIELD_CATEGORY_MAP"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "DestinationField": {
      "oneOf": [
        {
          "type": "string",
          "maxLength": 256,
          "pattern": ".*"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "TaskType": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Arithmetic",
            "Filter",
            "Map",
            "Mask",
            "Merge",
            "Truncate",
            "Validate"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "TaskPropertiesMap": {
      "type": "object",
      "properties": {
        "OperatorPropertyKey": {
          "$ref": "#/definitions/OperatorPropertiesKeys"
        },
        "Property": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 2048,
              "pattern": ".+"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "required": [
        "OperatorPropertyKey",
        "Property"
      ],
      "additionalProperties": false
    },
    "Task": {
      "type": "object",
      "properties": {
        "ConnectorOperator": {
          "$ref": "#/definitions/ConnectorOperator"
        },
        "SourceFields": {
          "type": "array",
          "items": {
            "type": "string",
            "maxLength": 2048,
            "pattern": ".*"
          }
        },
        "DestinationField": {
          "$ref": "#/definitions/DestinationField"
        },
        "TaskType": {
          "$ref": "#/definitions/TaskType"
        },
        "TaskProperties": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TaskPropertiesMap"
          }
        }
      },
      "required": [
        "SourceFields",
        "TaskType"
      ],
      "additionalProperties": false
    },
    "TriggerType": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Scheduled",
            "Event",
            "OnDemand"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ]
    },
    "Date": {
      "type": "number"
    },
    "ScheduledTriggerProperties": {
      "type": "object",
      "properties": {
        "ScheduleExpression": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 256,
              "pattern": ".*"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "DataPullMode": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Incremental",
                "Complete"
              ]
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ScheduleStartTime": {
          "$ref": "#/definitions/Date"
        },
        "ScheduleEndTime": {
          "$ref": "#/definitions/Date"
        },
        "Timezone": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 256,
              "pattern": ".*"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "ScheduleOffset": {
          "type": "integer",
          "minimum": 0,
          "maximum": 36000
        },
        "FirstExecutionFrom": {
          "$ref": "#/definitions/Date"
        }
      },
      "required": [
        "ScheduleExpression"
      ],
      "additionalProperties": false
    },
    "TriggerProperties": {
      "type": "object",
      "properties": {
        "Scheduled": {
          "$ref": "#/definitions/ScheduledTriggerProperties"
        }
      },
      "additionalProperties": false
    },
    "TriggerConfig": {
      "type": "object",
      "properties": {
        "TriggerType": {
          "$ref": "#/definitions/TriggerType"
        },
        "TriggerProperties": {
          "$ref": "#/definitions/TriggerProperties"
        }
      },
      "required": [
        "TriggerType"
      ],
      "additionalProperties": false
    },
    "FlowDefinition": {
      "type": "object",
      "properties": {
        "FlowName": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "[a-zA-Z0-9][\\w!@#.-]+",
              "maxLength": 256
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Description": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "[\\w!@#\\-.?,\\s]*",
              "maxLength": 2048
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "KmsArn": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "arn:aws:kms:.*:[0-9]+:.*",
              "minLength": 20,
              "maxLength": 2048
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Tasks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Task"
          }
        },
        "TriggerConfig": {
          "$ref": "#/definitions/TriggerConfig"
        },
        "SourceFlowConfig": {
          "$ref": "#/definitions/SourceFlowConfig"
        }
      },
      "required": [
        "FlowName",
        "KmsArn",
        "Tasks",
        "TriggerConfig",
        "SourceFlowConfig"
      ],
      "additionalProperties": false
    },
    "ObjectTypeMapping": {
      "type": "object",
      "properties": {
        "Key": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 255
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        },
        "Value": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z_][a-zA-Z_0-9-]*$",
              "minLength": 1,
              "maxLength": 255
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "Key",
        "Value"
      ]
    }
  },
  "properties": {
    "DomainName": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "minLength": 1,
          "maxLength": 64
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The unique name of the domain."
    },
    "Uri": {
      "oneOf": [
        {
          "type": "string",
          "minLength": 1,
          "maxLength": 255
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The URI of the S3 bucket or any other type of data source."
    },
    "FlowDefinition": {
      "$ref": "#/definitions/FlowDefinition"
    },
    "ObjectTypeName": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^[a-zA-Z_][a-zA-Z_0-9-]*$",
          "minLength": 1,
          "maxLength": 255
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The name of the ObjectType defined for the 3rd party data in Profile Service"
    },
    "CreatedAt": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The time of this integration got created"
    },
    "LastUpdatedAt": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The time of this integration got last updated at"
    },
    "Tags": {
      "description": "The tags (keys and values) associated with the integration",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Tag"
      },
      "minItems": 0,
      "maxItems": 50
    },
    "ObjectTypeNames": {
      "description": "The mapping between 3rd party event types and ObjectType names",
      "type": "array",
      "items": {
        "$ref": "#/definitions/ObjectTypeMapping"
      }
    }
  },
  "required": [
    "DomainName"
  ],
  "additionalProperties": false
}