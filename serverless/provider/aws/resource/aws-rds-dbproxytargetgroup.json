{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "description": "Resource schema for AWS::RDS::DBProxyTargetGroup",
  "definitions": {
    "ConnectionPoolConfigurationInfoFormat": {
      "type": "object",
      "properties": {
        "MaxConnectionsPercent": {
          "description": "The maximum size of the connection pool for each target in a target group.",
          "type": "integer",
          "minimum": 0,
          "maximum": 100
        },
        "MaxIdleConnectionsPercent": {
          "description": "Controls how actively the proxy closes idle database connections in the connection pool.",
          "type": "integer",
          "minimum": 0,
          "maximum": 100
        },
        "ConnectionBorrowTimeout": {
          "description": "The number of seconds for a proxy to wait for a connection to become available in the connection pool.",
          "type": "integer"
        },
        "SessionPinningFilters": {
          "description": "Each item in the list represents a class of SQL operations that normally cause all later statements in a session using a proxy to be pinned to the same underlying database connection.",
          "type": "array",
          "insertionOrder": false,
          "items": {
            "type": "string"
          }
        },
        "InitQuery": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "../component/functions.json#/AwsFunctionString"
            }
          ],
          "description": "One or more SQL statements for the proxy to run when opening each new database connection."
        }
      },
      "additionalProperties": false
    }
  },
  "properties": {
    "DBProxyName": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "[A-z][0-z]*",
          "maxLength": 64
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The identifier for the proxy."
    },
    "TargetGroupArn": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The Amazon Resource Name (ARN) representing the target group."
    },
    "TargetGroupName": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "default"
          ]
        },
        {
          "$ref": "../component/functions.json#/AwsFunctionString"
        }
      ],
      "description": "The identifier for the DBProxyTargetGroup"
    },
    "ConnectionPoolConfigurationInfo": {
      "$ref": "#/definitions/ConnectionPoolConfigurationInfoFormat"
    },
    "DBInstanceIdentifiers": {
      "type": "array",
      "insertionOrder": false,
      "items": {
        "type": "string"
      }
    },
    "DBClusterIdentifiers": {
      "type": "array",
      "insertionOrder": false,
      "items": {
        "type": "string"
      }
    }
  },
  "additionalProperties": false,
  "required": [
    "DBProxyName",
    "TargetGroupName"
  ]
}